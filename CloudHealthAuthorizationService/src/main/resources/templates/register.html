<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
    <meta charset="utf-8">
    <title>Sign Up</title>
    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" type="image/png" href="/images/icons/favicon.ico"/>
    <!-- Font-->
    <link rel="stylesheet" type="text/css" href="/fonts/line-awesome/css/line-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css">
    <!-- Jquery -->
    <link rel="stylesheet" type="text/css" href="/css/util.css">
    <link rel="stylesheet" type="text/css" href="/css/main.css">


</head>
<body class="form-v7">
<div class="page-content">
    <div class="form-v7-content">
        <form class="form-detail" action="#" method="post" id="register_form">
				
				    <span class="login100-form-title p-b-10">
						SmartHealth Cloud Sign Up
					</span>
            <div id= "notification-section" th:align="center">
                <!-- Notifications display area-->
            </div>
            <div class="form-row">
                <label for="username">USERNAME</label>
                <input type="text" name="username" id="username" class="input-text" required>
            </div>
            <div class="form-row">
                <label for="email">E-MAIL</label>
                <input type="text" name="email" id="email" class="input-text" required
                       pattern="[^@]+@[^@]+.[a-zA-Z]{2,6}">
            </div>
            <div class="form-row">
                <label for="phonenumber">PHONE-NUMBER</label>
                <input type="number" name="phoneNumber" id="phonenumber" class="input-text" required>
            </div>
            <div class="form-row">
                <label for="password">PASSWORD</label>
                <input type="password" name="password" id="password" class="input-text" required>
            </div>
            <div class="form-row">
                <label for="comfirm_password">CONFIRM PASSWORD</label>
                <input type="password" name="comfirm_password" id="comfirm_password" class="input-text" required>
            </div>
            <div class="container-login100-form-btn">
                <button class="login100-form-btn" type="submit" id="submit" name="submit">
                    Sign Up
                </button>
            </div>

            <ul class="login-more p-t-30">
                <li class="m-b-8">
						<span class="txt1">
							Forgot
						</span>

                    <a href="#" class="txt2">
                        Username / Password?
                    </a>
                </li>

                <li>
						<span class="txt1">
							Already have an account?
						</span>

                    <a href="/login" class="txt2">
                        Sign in
                    </a>
                </li>
            </ul>
        </form>

    </div>
</div>
<script src="/vendor/jquery/jquery-3.2.1.min.js"></script>
<script src="/vendor/jquery/jquery.validate.min.js"></script>
<script src="/js/additional-methods.min.js"></script>
<script>
    // just for the demos, avoids form submit
    //form validate++++++++++++++++++++++++++++++++++++++
    jQuery.validator.setDefaults({
        debug: true,
        success: function (label) {
            label.attr('id', 'valid');
        },
    });
    $("#register_form").validate({
        rules: {
            email: {
                required: true,
                email: true
            },
            password: "required",
            comfirm_password: {
                equalTo: "#password"
            }
        },
        messages: {
            username: {
                required: "Please enter an username"
            },
            email: {
                required: "Please provide an email"
            },
            phonenumber: {
                required: "Please provide a phonenumber"
            },
            password: {
                required: "Please provide a password"
            },
            comfirm_password: {
                required: "Please provide a password",
                equalTo: "Wrong Password"
            }
        }
    });

    //form submit+++++++++++++++++++++++++++++++++++++
    $("#submit").on('click', function(){
        var form =  $("#notification-section");
        var data ={
            username: $("#username").val(),
            email : $("#email").val(),
            phoneNumber:$("#phonenumber").val(),
            password : $("#password").val()
        }
        // send ajax
        console.log(JSON.stringify(data));
        $.ajax({
            url: 'Http://localhost:9191/register',
            type : "POST",
            dataType : 'json',
            data : JSON.stringify(data),
            contentType:"application/json;charset=UTF-8",
            success : function(result) {
                $("#register_form")[0].reset();
                form.html("Registered successfully").addClass("form-row validate-input alert alert-success")
            },
            error: function(xhr, resp, text) {
                form.html("Error during registration");
            }
        });
    });


</script>
</body>
</html>
